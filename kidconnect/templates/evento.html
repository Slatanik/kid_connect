{% extends 'layout.html' %}
{% load static %}
{% block content %}
<style>
  .modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.4);
  }

  .modal-content {
    background-color: #f2f2f2;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
    max-width: 600px;
    text-align: center;
  }

  .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
  }

  .close:hover,
  .close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
  }

  .button {
    background-color: #4CAF50;
    border: none;
    color: white;
    padding: 10px 20px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 4px 2px;
    cursor: pointer;
  }
</style>
<body>
  <div class="d-flex" id="content-wrapper">
    <!-- Sidebar -->
    <div id="sidebar-container" class="barraLateral">
      <div class="logo">
          <h4 class="text-light font-weight-bold mb-0" ><a class="text-light" href= "{% url 'menu' %}">Kids connect</a></h4>
      </div>
      <div class="menu">
        <a href="{% url 'evento' %}" class="d-block text-light p-3 border-0"><i class="icon ion-md-apps lead mr-2"></i>
            Calendario</a>
        <a href="{% url 'docente' %}" class="d-block text-light p-3 border-0"><i class="icon ion-md-people lead mr-2"></i>
            Profesores</a>      
        {% if request.session.perfil == '4' %}    
        <a href="{% url 'crearUsuario' %}" class="d-block text-light p-3 border-0"><i class="icon ion-md-book outline mr-2"></i>
            Crear usuario</a>
        {% endif %}
        <a href= "{% url 'correo' %}" class="d-block text-light p-3 border-0"><i class="icon ion-md-mail-unread mr-2"></i>
            Mensajes</a>
        {% if request.session.perfil == '4'  or request.session.perfil == '2' or request.session.perfil == '3' %}
        <a href= "{% url 'crearAlumno' %}" class="d-block text-light p-3 border-0"><i class="icon ion-md-people lead mr-2"></i>Crear Alumno</a>
        {% endif %}
    </div>
  </div>
        <!-- Fin sidebar -->

        <div class="w-100">

         <!-- Navbar -->
         <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
            <div class="container">
    
              <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
    
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <form class="form-inline position-relative d-inline-block my-2">
                  <input class="form-control" type="search" placeholder="Buscar" aria-label="Buscar">
                  <button class="btn position-absolute btn-search" type="submit"><i class="icon ion-md-search"></i></button>
                </form>
                <div class="menu" id="menu-container">
                  <a href="{% url 'evento' %}" class="d-block text-light p-3 border-0"><i class="icon ion-md-apps lead mr-2"></i>
                      Calendario</a>
                  <a href="{% url 'docente' %}" class="d-block text-light p-3 border-0"><i class="icon ion-md-people lead mr-2"></i>
                      Profesores</a>      
                  {% if request.session.perfil == '4' %}    
                  <a href="{% url 'crearUsuario' %}" class="d-block text-light p-3 border-0"><i class="icon ion-md-book outline mr-2"></i>
                      Crear usuario</a>
                  {% endif %}
                  <a href= "{% url 'correo' %}" class="d-block text-light p-3 border-0"><i class="icon ion-md-mail-unread mr-2"></i>
                      Mensajes</a>
                  {% if request.session.perfil == '4'  or request.session.perfil == '2' or request.session.perfil == '3' %}
                  <a href= "{% url 'crearAlumno' %}" class="d-block text-light p-3 border-0"><i class="icon ion-md-people lead mr-2"></i>Crear Alumno</a>
                  {% endif %}
              </div>
                <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
                  <li class="nav-item dropdown">
                    <a class="nav-link text-dark dropdown-toggle" href="#" id="navbarDropdown" role="button"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                  
                      <i class="icon ion-md-settings"></i><span id="storedValue"></span>

                    </a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                      <a class="dropdown-item" href="{% url 'cerrarSesion' %}">Cerrar sesión</a>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </nav>
          <!-- Fin Navbar -->

        <!-- Page Content -->
        <div id="content" class="bg-grey w-100">

              <section class="bg-light py-3">
                  <div class="container">
                      <div class="row">
                          <div class="col-lg-9 col-md-8">
                            <h1 class="font-weight-bold mb-0">Calendario</h1>
                            <p class="lead text-muted">Revisa la última información</p>
                          </div>
                          <div class="col-lg-3 col-md-4 d-flex">
                            <button class="btn btn-primary w-100 align-self-center">Crear Evento</button>
                          </div>
                      </div>
                  </div>
              </section>
              <button class="button" onclick="openModal()">Eventos</button>

              <div id="modal" class="modal">
                <div class="modal-content">
                  <span class="close" onclick="closeModal()">&times;</span>
                  <h3>Eventos</h3>
                  <form id="eventosForm" readonly>
                    <label for="id">ID:</label>
                    <input type="text" id="id" name="id" readonly><br>
                    <label for="name">Name:</label>
                    <input type="text" id="name" name="name" readonly><br>
                    <label for="fecha">Fecha:</label>
                    <input type="text" id="fecha" name="fecha" readonly><br>
                  </form>
                </div>
              </div>
             
              <section>
                  <div class="container">
                      <div class="row">
                          <div class="col-lg-8 my-3">
                              <div class="card rounded-0">
                                  <div class="card-header bg-light">
                                    <h6 class="font-weight-bold mb-0">EVENTOS<div id="mensajesContainer"></div></h6>
                                  </div>
                                  <div class="card-body">               
                                    <div id='calendar'></div>
                                        <script src="static\css\evento.js"></script>                                    
                                  </div>
                              </div>
                          </div>                         
                      </div>
                  </div>
              </section>
 

        </div>

        </div>
    </div>
    <script>
      function openModal() {
        var modal = document.getElementById("modal");
        modal.style.display = "block";
  
        // Obtener los elementos del formulario
        var idInput = document.getElementById("id");
        var nameInput = document.getElementById("name");
        var fechaInput = document.getElementById("fecha");
  
        // Realizar la solicitud HTTP para obtener los datos de la API
        fetch("http://tmp.enred.cl/kc/rest/get_evento_all.php")
          .then(function(response) {
            return response.json();
          })
          .then(function(data) {
            // Obtener el primer evento del array de datos
            var evento = data[0];
  
            // Asignar los valores a los campos del formulario
            idInput.value = evento.id;
            nameInput.value = evento.name;
            fechaInput.value = evento.fecha;
          })
          .catch(function(error) {
            console.log("Error: " + error);
          });
      }
  
      function closeModal() {
        var modal = document.getElementById("modal");
        modal.style.display = "none";
      }
    </script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
      var menuContainer = document.getElementById('menu-container');
      var navbarToggle = document.querySelector('.navbar-toggler');
  
      // Ocultar el menú inicialmente
      menuContainer.style.display = 'none';
  
      // Agregar evento de clic al botón de toggle navigation
      navbarToggle.addEventListener('click', function() {
        // Verificar si la barra de navegación se está abriendo o cerrando
        if (menuContainer.style.display === 'none') {
          // Mostrar el menú si la barra de navegación se está abriendo
          menuContainer.style.display = 'block';
        } else {
          // Ocultar el menú si la barra de navegación se está cerrando
          menuContainer.style.display = 'none';
        }
      });
    });
  </script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</body>
{% endblock %}